{% extends "core/_message_modal.html" %}

{% load static from static %}

{% block modal_title %}
Batch Query Help
{% endblock modal_title %}

{% block modal_body %}
<p>
    With this form you can create a new batch query job to find studies
    in a source DICOM server. 
    The query jobs are put into a queue and will be processed by a worker
    when the time is right. You will get an Email when the job is finished
    (or failed for some reason).
</p>
<p>
    Each batch query job contains several query tasks that define what 
    studies to look for. The search terms must be specified in a CSV file.
    If your data is in an Excel file then it can be exported to a CSV file.  
    The first row of the CSV file must contain the header with the column
    titles. The following rows contain the search terms.
</p>

<p>
    The following columns may be present in the batch file:
    <dl>
        <dt>BatchID</dt>
        <dd>A consecutive unique number that identifies the query (required).</dd>
        <dt>PatientID</dt>
        <dd>The unique ID of the patient in the PACS.</dd>
        <dt>PatientName</dt>
        <dd>The name of the patient.</dd>
        <dt>PatientBirthDate</dt>
        <dd>The birth date of the patient.</dd>
        <dt>AccessionNumber</dt>
        <dd>The Accession Number (a unique ID in the RIS) of the study.</dd>
        <dt>From</dt>
        <dd>Only search for studies newer than or equal to this date.</dd>
        <dt>Until</dt>
        <dd>Only search for studies older than or equal to this date.</dd>
        <dt>Modalities</dt>
        <dd>A comma separated list of modalities of which a study at least one must contain.</dd>
    </dl>
</p>

<div class="mb-1">
    <a href="{% static 'samples/batch_query_sample.csv' %}">
        {% include "core/_download.svg" %}
        Download a sample CSV batch query file (supported by Excel).
    </a>
</div>

{% endblock modal_body %}
